
<div class="d-flex justify-content-between form-group my-2">
  <div class="arrow_back">
    <a class="back" routerLink="/Admin/dashboard/subjects">
      <button class="btn btn-primary">العودة</button>
    </a>
  </div>
  <button class="btn btn-outline-primary" routerLink="/Admin/dashboard/subjects/{{subjectId}}/addLessonQuestions" >اضافه سؤال</button>
</div>

<div *ngIf="subjectName" class="header text-end">
  <h3>{{ subjectName }}</h3>
</div>

<div class="mt-3">

<nav aria-label="breadcrumb" style="--bs-breadcrumb-divider: '';">
  <ol class="breadcrumb">
    <li class="breadcrumb-item mx-2"><a [routerLink]="['/Admin/dashboard/subjects']">المواد</a></li>
    <li>/</li>
    <li class="breadcrumb-item active mx-2" aria-current="page">اسئله الماده</li>
    <li *ngIf="subjectName">/</li>
    <li *ngIf="subjectName" class="breadcrumb-item active mx-2" aria-current="page">{{ subjectName }}</li>
  </ol>
</nav>

<ng-container *ngIf="!isLoading ; then view_table ; else loading_skeleton "></ng-container>

<ng-template #view_table>
  <div class="d-flex justify-content-end">
  </div>
  <div class="col-md-4">
    <div class="form-group">
    </div>
  </div>
  <table class="table mt-4 table-sm table-hover ">
    <thead>
      <tr>
        <th scope="col">الترتيب</th>
        <th scope="col">الماده</th>
        <th scope="col">الأسئلة</th>
        <th scope="col">الصوره</th>
        <th scope="col">الإجابة</th>
        <th scope="col">حذف</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let subject of subjectQuestions; let i = index">
        <td>{{ i+1 }}</td>
        <td> {{ subject.subject_Name }} </td>
        <td> {{ subject.question_Text }} </td>
        <td >
          <ng-container *ngIf="subject.question_Image != null; else noImage">
            <img [src]="imgUrl + '/' + subject.question_Image" [alt]="subject.question_Image" class="rounded" width="40">
          </ng-container>
          <ng-template #noImage>
            <span class="badge bg-danger">No Image</span>
          </ng-template>
        </td>
        <td>
          <button class="btn btn-outline-dark" (click)="open(answer, subject.subjectExamAnswerResponses)">الاجابات</button>
        </td>
        <td>
          <button class="btn btn-outline-danger btn-sm"
                 (click)="warningDeleting(subject.question_Id)">
            <i class="fa fa-trash-alt"></i>
          </button>
        </td>
      </tr>
    </tbody>
  </table>

</ng-template>

<ng-template #loading_skeleton>
  <!-- <ngx-skeleton-loader count="2" appearance="line" [theme]="{
      'border-radius': '5px',
      height: '40px',
      'background-color': '#efefef',
      width: '130px',
      border: '1px solid white'
    }"></ngx-skeleton-loader>

  <div class="item">
    <ngx-skeleton-loader count="5" appearance="line" [theme]="{
          'border-radius': '5px',
          height: '30px',
          'background-color': '#efefef',
          border: '1px solid white'
        }"></ngx-skeleton-loader>
  </div> -->
</ng-template>


<!-- Success Modal Swal -->
<swal #SuccessSwal title="عملية ناجحة" icon="success" [showConfirmButton]="true" [confirmButtonText]="'حسناً'"
  [confirmButtonColor]="'#28a745'" class="swal-modal">
</swal>


<ng-template #answer let-modal>
  <div class="modal-header">
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    <h4 class="modal-title" id="modal-basic-title">الاجابات</h4>
  </div>
  <div class="modal-body">
    <ol class="list-group list-group-numbered" >
      <li class="list-group-item d-flex justify-content-between align-items-end " *ngFor="let answer of listOfAnswers; let j =index">
        <div class="ms-2 ms-auto">
          <div class="fw-bold">{{ answer.answer }}</div>
        </div>
        <span *ngIf="answer.is_Selected == true" class="badge bg-success rounded-pill">اجابه صحيحه</span>
        <span *ngIf="answer.is_Selected == false" class="badge bg-danger rounded-pill">اجابه خاطئه</span>
      </li>

    </ol>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">حفظ</button>
  </div>
</ng-template>


<!-- <ng-template #edit let-modal>
  <div class="modal-header">
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    <h4 class="modal-title" id="modal-basic-title">تعديل</h4>
  </div>
  <div class="modal-body">
    <form [formGroup]="editQuestionForm">
      <div class="row">
        <div class="form-group">
          <label>السؤال</label>
          <input type="text" placeholder="السؤال" class="form-control" formControlName="question">
        </div>
        <ng-container formArrayName="subjectQuestionAnswerResponse">
          <ng-container [formGroupName]="i" *ngFor="let group of Answers.controls; let i = index" >
            <hr>
              <label >اجابه {{ i+1 }} </label>
              <div class="d-flex">
                <input type="text" class="form-control" formControlName="questionAnswer" placeholder="ادخل اجابه">
                <button class="btn btn-danger me-2"  (click)="removeAnswer(i)">ازاله</button>
              </div>
              <div class="d-flex">
                <input type="checkbox" formControlName="isTrue" class="ms-2 mb-4 mt-2">اجابه صحيحه
              </div>
              <hr>
          </ng-container>
        </ng-container>
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-info" (click)="modal.close('Save click');editSubjectQuestion()">تعديل</button>
  </div>
</ng-template> -->
